<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>MARS FUTURE AI : DEBUG</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#000;
  font-family:'Orbitron', sans-serif;
}
canvas{display:block;touch-action:none}
#startScreen{
  position:fixed;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:radial-gradient(circle at center, #2b0000 0%, #000 100%);
  z-index:10;
  color:#fff;
}
#title{
  font-size: clamp(40px, 8vw, 80px);
  font-weight: 900;
  color:#ff3333;
  text-shadow:0 0 20px #f00;
  margin-bottom:40px;
}
#gameStart{
  font-size:24px;
  padding:15px 50px;
  background:none;
  border:2px solid #ff3333;
  color:#ff3333;
  cursor:pointer;
}
#gameStart:hover{
  background:#ff3333;
  color:#000;
}
#debug{
  position:fixed;
  left:10px;
  bottom:10px;
  color:#0f0;
  font-size:12px;
  opacity:0.8;
}
</style>
</head>

<body>

<div id="startScreen">
  <div id="title">MARS<br>FUTURE AI</div>
  <div id="gameStart">MISSION START</div>
</div>

<canvas id="c"></canvas>
<div id="debug">DEBUG READY</div>

<script>
"use strict";

/* ================= BASIC ================= */
const c = document.getElementById("c");
const ctx = c.getContext("2d");
const debugEl = document.getElementById("debug");

function resize(){
  c.width = innerWidth;
  c.height = innerHeight;
}
addEventListener("resize", resize);
resize();

/* ================= STATE ================= */
let gameRunning = false;
let score = 0;
let nextBossScore = 10000;

const player = {
  x: c.width/2,
  y: c.height*0.8,
  r: 15,
  hp: 100,
  shield: 0,
  shieldTimer: 0,
  power: 1,
  powerTimer: 0
};

let bullets = [];
let enemies = [];
let enemyBullets = [];
let items = [];

const bgStars = Array.from({length:80},()=>({
  x:Math.random()*c.width,
  y:Math.random()*c.height,
  s:Math.random()*2+1
}));

/* ================= INPUT ================= */
function move(e){
  const p = e.touches ? e.touches[0] : e;
  player.x = p.clientX;
  player.y = p.clientY;
}
c.addEventListener("mousemove", move);
c.addEventListener("touchmove", e=>{
  move(e);
  e.preventDefault();
},{passive:false});

/* ================= START ================= */
document.getElementById("gameStart").onclick = ()=>{
  document.getElementById("startScreen").style.display="none";
  gameRunning = true;
};

/* ================= SHOOT ================= */
setInterval(()=>{
  if(!gameRunning) return;

  bullets.push({
    x:player.x,
    y:player.y-20,
    v:12,
    dmg:20
  });

  if(player.power > 1){
    bullets.push({x:player.x-15,y:player.y,v:12,dmg:20});
    bullets.push({x:player.x+15,y:player.y,v:12,dmg:20});
  }
},180);

/* ================= ENEMY ================= */
setInterval(()=>{
  if(!gameRunning) return;
  const type = Math.random()<0.3?"chaser":(Math.random()<0.6?"zigzag":"fast");
  enemies.push({
    x:Math.random()*c.width,
    y:-30,
    size:18,
    type,
    hp:40,
    speed:type==="fast"?7:3.5,
    angle:0
  });
},450);

/* ================= BOSS ================= */
let boss = null;
function spawnBoss(){
  boss = {
    x:c.width/2,
    y:100,
    r:50,
    hp:5000,
    cd:0
  };
}

/* ================= LOOP ================= */
function loop(){
  try{

    /* BACKGROUND */
    ctx.fillStyle="#000";
    ctx.fillRect(0,0,c.width,c.height);

    ctx.fillStyle="#fff";
    bgStars.forEach(s=>{
      s.y += s.s;
      if(s.y>c.height) s.y=0;
      ctx.fillRect(s.x,s.y,s.s,s.s);
    });

    if(!gameRunning){
      requestAnimationFrame(loop);
      return;
    }

    if(score>=nextBossScore && !boss){
      spawnBoss();
      nextBossScore += 10000;
    }

    /* BULLETS */
    bullets = bullets.filter(b=>{
      b.y -= b.v;
      enemies.forEach(e=>{
        if(Math.hypot(b.x-e.x,b.y-e.y)<e.size){
          e.hp -= b.dmg;
          b.y = -999;
        }
      });
      if(boss && Math.hypot(b.x-boss.x,b.y-boss.y)<boss.r){
        boss.hp -
