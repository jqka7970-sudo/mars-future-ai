<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>MARS FUTURE AI - BOSS BATTLE</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">

<style>
:root { --mars:#ff3333; --ui-gold:#ffcc00; --boss-hp:#ff0044; }
html,body{margin:0;padding:0;width:100%;height:100%;background:#000;color:#fff;font-family:'Orbitron',sans-serif;overflow:hidden;}
.bg-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,#1a0505,#3d0e0e,#1a0505);opacity:.8;z-index:0;}
#ui-layer{position:relative;z-index:10;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;}
h1{font-size:5rem;color:var(--mars);letter-spacing:10px;margin-bottom:40px;filter:drop-shadow(0 0 10px rgba(255,0,0,.5));}
#start-btn{padding:15px 40px;font-size:1.5rem;background:transparent;color:#fff;border:3px solid var(--mars);cursor:pointer;}
#start-btn:hover{background:var(--mars);color:#000;}
#sound-ctrl{margin-top:25px;background:none;border:1px solid #444;color:#aaa;cursor:pointer;}
canvas{display:none;background:#0a0000;margin:0 auto;cursor:none;border:2px solid #331111;}
#hud{position:absolute;top:10px;width:100%;display:none;justify-content:space-around;color:var(--ui-gold);z-index:20;}
#boss-ui{position:absolute;top:50px;left:50%;transform:translateX(-50%);width:300px;height:10px;border:1px solid #fff;display:none;}
#boss-hp-bar{width:100%;height:100%;background:var(--boss-hp);}
</style>
</head>

<body>

<div class="bg-overlay"></div>

<div id="hud">
  <span>SCORE: <span id="score">0</span></span>
  <span>LIVES: <span id="lives">3</span></span>
</div>

<div id="boss-ui"><div id="boss-hp-bar"></div></div>

<!-- START PAGE -->
<div id="ui-layer">
  <h1>MARS<br>FUTURE AI</h1>
  <button id="start-btn">START GAME</button>
  <button id="sound-ctrl">ğŸµ SOUND: OFF</button>
</div>

<!-- GAME -->
<canvas id="gameCanvas"></canvas>

<!-- BGM -->
<audio id="bgm" src="mars.mp3" loop preload="auto"></audio>

<script>
/* ===== ê¸°ì¡´ ê²Œì„ ë³€ìˆ˜ (ë³€ê²½ ì—†ìŒ) ===== */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const uiLayer = document.getElementById('ui-layer');
const hud = document.getElementById('hud');
const bossUi = document.getElementById('boss-ui');
const bossHpBar = document.getElementById('boss-hp-bar');

let gameActive=false, score=0, lives=3, frame=0;
let powerLevel=1, powerTimer=0;
const player={x:0,y:0};
let bullets=[], enemies=[], enemyBullets=[], items=[], explosions=[];
let boss={active:false,x:240,y:-100,hp:100,maxHp:100,dir:1};

/* ===== ğŸ”Š ì‚¬ìš´ë“œ ì¶”ê°€ ë¶€ë¶„ ===== */
const bgm = document.getElementById('bgm');
const soundBtn = document.getElementById('sound-ctrl');
let soundEnabled = false;
let soundUnlocked = false;

// ì‹œì‘ í˜ì´ì§€ ì‚¬ìš´ë“œ ON/OFF (ëª¨ë°”ì¼ unlock)
soundBtn.onclick = () => {
  soundEnabled = !soundEnabled;

  if (!soundUnlocked) {
    bgm.volume = 0;
    bgm.play().then(() => {
      bgm.pause();
      bgm.currentTime = 0;
      soundUnlocked = true;
    });
  }

  soundBtn.innerText = soundEnabled ? "ğŸµ SOUND: ON" : "ğŸµ SOUND: OFF";
};

/* ===== START GAME (ì‚¬ìš´ë“œ ì¬ìƒë§Œ ì¶”ê°€) ===== */
document.getElementById('start-btn').onclick = () => {
  uiLayer.style.display='none';
  hud.style.display='flex';
  canvas.style.display='block';
  canvas.width=480;
  canvas.height=window.innerHeight;
  player.x=canvas.width/2;
  player.y=canvas.height-80;
  gameActive=true;

  if (soundEnabled) {
    bgm.volume = 0.6;
    bgm.play();
  }

  update();
};

/* ===== ì´í•˜ ê²Œì„ ë¡œì§: ì›ë³¸ ê·¸ëŒ€ë¡œ ===== */
window.onmousemove=e=>{
  if(!gameActive) return;
  const r=canvas.getBoundingClientRect();
  player.x=e.clientX-r.left;
  player.y=e.clientY-r.top;
};

function update(){
  if(!gameActive) return;
  frame++;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // (ì¤‘ëµ)
  // ğŸ”´ ì—¬ê¸° ì•„ë˜ëŠ” ë„¤ê°€ ì˜¬ë¦° ê²Œì„ ì½”ë“œ ê·¸ëŒ€ë¡œë¼ê³  ê°€ì •
  // ğŸ”´ ë³´ìŠ¤ / íƒ„ë§‰ / ì¶©ëŒ / ì ìˆ˜ ë¡œì§ ì „ë¶€ ë™ì¼
  requestAnimationFrame(update);
}
</script>

</body>
</html>
